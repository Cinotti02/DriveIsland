{% extends 'base.html' %}

{% block content %}

{% load static %}

<!-- Sub banner start -->
<div class="sub-banner overview-bgi">
    <div class="container breadcrumb-area">
        <div class="breadcrumb-areas">
            <h1>Contact Us</h1>
            <ul class="breadcrumbs">
                <li><a href="{% url 'home' %}">Home</a></li>
                <li class="active">Contact Us</li>
            </ul>
        </div>
    </div>
</div>
<!-- Sub Banner end -->

<!-- Contact 2 start -->
<div class="contact-2 content-area-5">
    <div class="container">
        <!-- Main title -->
        <div class="main-title text-center">
            <h1>Contact <span>Us</span></h1>
            <p>Compila il modulo per inviarci un messaggio</p>
        </div>



        {% if messages %}
            {% for message in messages %}
                {% if "admin_reply" not in message.tags %}
                    <div class="alert {% if message.message == "Il tuo messaggio è stato inviato con successo!" %} alert-success {% else %} alert-danger {% endif %}">
                        {{ message }}
                    </div>
                {% endif %}
            {% endfor %}
          {% endif %}
    <br>

        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col-lg-7">
                    <div class="row">
                        <div class="col-md-6 text-left">
                            <div class="form-group name">
                                {{ form.name }}
                                {{ form.name.errors }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group email">
                                {{ form.email }}
                                {{ form.email.errors }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group subject">
                                {{ form.subject }}
                                {{ form.subject.errors }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group number">
                                {{ form.phone }}
                                {{ form.phone.errors }}
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group message">
                                {{ form.message }}
                                {{ form.message.errors }}
                                <small id="charCount" class="form-text text-muted">Minimo 10 caratteri.</small>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="send-btn text-center">
                                <button type="submit" class="btn btn-md button-theme">Send Message</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="contact-info-2">
                        <div class="ci-box">
                            <div class="icon">
                                <i class="flaticon-phone"></i>
                            </div>
                            <div class="detail">
                                <h5>Phone:</h5>
                                <p><a href="#">0477 8556 552</a></p>
                            </div>
                        </div>
                        <div class="ci-box">
                            <div class="icon">
                                <i class="flaticon-mail"></i>
                            </div>
                            <div class="detail">
                                <h5>Email:</h5>
                                <p><a href="#">info@themevessel.com</a></p>
                            </div>
                        </div>
                        <div class="ci-box">
                            <div class="icon">
                                <i class="flaticon-earth"></i>
                            </div>
                            <div class="detail">
                                <h5>Web:</h5>
                                <p><a href="#">info@themevessel.com</a></p>
                            </div>
                        </div>
                        <div class="ci-box mb-0">
                            <div class="icon">
                                <i class="flaticon-fax"></i>
                            </div>
                            <div class="detail">
                                <h5>Fax:</h5>
                                <p><a href="#">+0477 85X6 552</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- Contact 2 end -->

<script>
document.addEventListener("DOMContentLoaded", function () {
    const messageField = document.getElementById("id_message");
    const charCount = document.getElementById("charCount");

    if (messageField && charCount) {
        messageField.addEventListener("input", function () {
            const length = messageField.value.trim().length;

            if (length < 10) {
                charCount.textContent = `⚠️ Hai scritto solo ${length} caratteri. Minimo 10 richiesti.`;
                charCount.classList.remove("text-muted", "text-success");
                charCount.classList.add("text-danger");
            } else {
                charCount.textContent = `✅ ${length} caratteri scritti.`;
                charCount.classList.remove("text-muted", "text-danger");
                charCount.classList.add("text-success");
            }
        });
    }
});
</script>

{% endblock content %}